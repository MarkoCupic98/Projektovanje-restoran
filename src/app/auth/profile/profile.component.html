<div fxLayoutAlign="space-between">
    <button mat-raised-button color="primary" *ngIf="this.profileForInput.id == this.userService.currentUser.id"
    (click)="this.isEditing = !this.isEditing">
        <mat-icon matListIcon> edit </mat-icon>
    </button>

    <button mat-raised-button color="primary" [mat-dialog-close]="true">
        <mat-icon matListIcon> close </mat-icon>
    </button>
</div>

<br>

<mat-dialog-content>
    <form fxLayout="column" fxLayoutGap="3vh" #editForm="ngForm" (ngSubmit)="finishEditing(editForm)">
        <!-- Email -->
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1vw">
                <mat-icon> email </mat-icon>
                <div fxLayout="column" *ngIf="!this.isEditing">
                    <span> {{ this.profileForInput.email }} </span>
                </div>

                <mat-form-field *ngIf="this.isEditing">
                    <input matInput type="email" placeholder="Your email" ngModel name="email"
                    [(ngModel)]="this.profileForInput.email" email required #emailInput="ngModel">

                    <mat-error *ngIf="emailInput.hasError('required')"> Email is required </mat-error>
                    <mat-error *ngIf="!emailInput.hasError('required')"> Email has incorrect format! </mat-error>
                </mat-form-field>
            </div>

        <!-- Password -->
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1vw">
                <mat-icon> lock </mat-icon>
                <div fxLayout="column"  *ngIf="!this.isEditing">
                    <span> {{ this.profileForInput.password }} </span>
                </div>

                <mat-form-field *ngIf="this.isEditing" hintLabel="Minimum 6 characters">
                    <input matInput type="password" placeholder="Your password" ngModel name="password" minlength="6"
                    [(ngModel)]="this.profileForInput.password" password required #passwordInput="ngModel">

                    <mat-hint align="end"> {{ passwordInput.value?.length }} / 6 </mat-hint>
                </mat-form-field>
            </div>

        <!-- Adress -->
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1vw">
                <mat-icon> location_on </mat-icon>
                <div fxLayout="column" *ngIf="!this.isEditing">
                    <span> {{ this.profileForInput.adress }} </span>
                </div>

                <mat-form-field *ngIf="this.isEditing">
                    <input matInput type="text" placeholder="Your adress" ngModel name="adress"
                    [(ngModel)]="this.profileForInput.adress" required #adressInput="ngModel">

                    <mat-error *ngIf="adressInput.hasError('required')"> Adress is required </mat-error>
                </mat-form-field>
            </div>

        <button *ngIf="this.isEditing" mat-raised-button type="submit" color="primary"> Save the changes </button>
    </form>
    
    <br>
</mat-dialog-content>